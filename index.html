<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SPM Legistra Flow</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <style>
      :root {
        --bg-1: #0f274e;
        --bg-2: #3f5f97;
        --bg-3: #17315f;
        --panel: #efefef;
        --tile: #e2e2e2;
        --ink: #111318;
        --muted: #4b4e55;
        --brand-1: #4d75b4;
        --brand-2: #1f568f;
        --brand-3: #103f78;
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: "Poppins", sans-serif;
        color: var(--ink);
        background:
          radial-gradient(78rem 46rem at 13% 93%, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0) 45%),
          radial-gradient(36rem 28rem at 52% 58%, rgba(156, 186, 246, 0.27), rgba(156, 186, 246, 0) 65%),
          linear-gradient(135deg, var(--bg-1) 0%, var(--bg-2) 52%, var(--bg-3) 100%);
        overflow: hidden;
      }
      .app {
        position: relative;
        width: 100%;
        height: 100%;
      }
      .screen {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: clamp(12px, 2.5vw, 34px);
        opacity: 0;
        transform: translateY(16px) scale(0.99);
        pointer-events: none;
        visibility: hidden;
        transition: opacity 0.45s, transform 0.45s, visibility 0s linear 0.45s;
        overflow: auto;
      }
      .screen.active {
        opacity: 1;
        transform: none;
        pointer-events: auto;
        visibility: visible;
      }
      .panel {
        width: min(1280px, calc(100vw - clamp(24px, 5vw, 84px)));
        border-radius: 24px;
        background: var(--panel);
        box-shadow: 0 30px 95px rgba(4, 12, 27, 0.46);
      }
      .logo {
        display: inline-flex;
        align-items: center;
        gap: clamp(7px, 0.8vw, 12px);
        line-height: 1;
      }
      .logo svg {
        width: clamp(34px, 2.6vw, 44px);
        height: auto;
        fill: none;
        stroke: currentColor;
        stroke-width: 3;
        stroke-linecap: round;
        stroke-linejoin: round;
      }
      .logo .word {
        font-size: clamp(34px, 2.8vw, 52px);
        letter-spacing: -0.045em;
        font-weight: 500;
      }
      .logo.light {
        color: #f7f9fd;
      }
      .logo.dark {
        color: #103265;
      }
      .spm {
        margin: 0;
        font-size: clamp(86px, 8vw, 146px);
        font-weight: 800;
        line-height: 0.86;
        letter-spacing: -0.05em;
        color: #fff;
      }
      .spm .m {
        position: relative;
        display: inline-block;
        padding-right: 0.05em;
      }
      .spm .m::after {
        content: "";
        position: absolute;
        right: 0.02em;
        top: 55%;
        transform: translateY(-55%);
        border-left: 0.17em solid transparent;
        border-right: 0.17em solid transparent;
        border-top: 0.24em solid #f3d24b;
      }
      .login {
        padding: 12px;
      }
      .login-wrap {
        display: grid;
        grid-template-columns: 40% 60%;
        min-height: min(760px, calc(100vh - 78px));
        border-radius: 20px;
        overflow: hidden;
      }
      .left {
        position: relative;
        border-radius: 18px;
        overflow: hidden;
        padding: clamp(26px, 2.8vw, 44px);
        background: linear-gradient(164deg, #122e5d 0%, #2a4a82 55%, #3b5d96 100%);
      }
      .left::before {
        content: "";
        position: absolute;
        inset: 0;
        background:
          radial-gradient(circle at 62% 34%, rgba(145, 177, 239, 0.25), transparent 42%),
          linear-gradient(90deg, rgba(59, 87, 136, 0.4) 0 52%, transparent 52% 100%);
      }
      .left::after {
        content: "";
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        height: 53%;
        background: linear-gradient(90deg, rgba(133, 165, 223, 0.28) 0 8%, transparent 8% 10%, rgba(133, 165, 223, 0.22) 10% 18%, transparent 18% 20%, rgba(133, 165, 223, 0.2) 20% 31%, transparent 31% 100%);
      }
      .wm {
        position: absolute;
        right: 10%;
        bottom: -3%;
        margin: 0;
        font-size: clamp(10rem, 20vw, 15rem);
        line-height: 0.8;
        color: rgba(110, 145, 206, 0.2);
        font-weight: 700;
      }
      .left-copy {
        position: relative;
        z-index: 1;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }
      .left-copy .logo {
        margin-top: clamp(24px, 2.8vw, 42px);
      }
      .subtitle {
        margin: clamp(12px, 1.3vw, 18px) 0 0;
        font-size: clamp(28px, 2.1vw, 38px);
        color: #e8edf7;
      }
      .right {
        padding: clamp(28px, 4vw, 62px) clamp(22px, 4vw, 60px);
        display: flex;
        align-items: center;
      }
      .right-inner {
        width: 100%;
      }
      .head {
        display: flex;
        justify-content: space-between;
        gap: 20px;
        margin-bottom: clamp(22px, 2vw, 32px);
      }
      .head h1 {
        margin: 0;
        font-size: clamp(70px, 7.4vw, 116px);
        line-height: 0.8;
        letter-spacing: -0.055em;
      }
      .head p {
        margin: 8px 0 0;
        width: min(240px, 45%);
        font-size: clamp(18px, 1.4vw, 30px);
        line-height: 1.12;
        color: var(--muted);
      }
      form {
        width: min(560px, 100%);
        margin: 0 auto;
      }
      .field {
        margin-bottom: 15px;
      }
      .label {
        display: inline-flex;
        align-items: center;
        gap: 9px;
        margin-bottom: 8px;
        font-size: clamp(26px, 2vw, 34px);
        text-transform: uppercase;
        letter-spacing: 0.04em;
        color: #53555c;
      }
      .label svg {
        width: 0.95em;
        height: 0.95em;
      }
      .input {
        width: 100%;
        height: 56px;
        border-radius: 999px;
        border: 2px solid rgba(0, 0, 0, 0.66);
        padding: 0 22px;
        font-size: clamp(20px, 1.35vw, 26px);
        color: #3a3c42;
        outline: none;
      }
      .input::placeholder {
        color: #b8b8b8;
      }
      .input:focus {
        border-color: #1d4f8b;
        box-shadow: 0 0 0 3px rgba(29, 79, 139, 0.18);
      }
      .btn {
        width: 100%;
        height: 58px;
        margin-top: 8px;
        border: 0;
        border-radius: 999px;
        background: #dfdfdf;
        color: #111;
        font-size: clamp(20px, 2.1vw, 40px);
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.22s, filter 0.22s, box-shadow 0.22s;
      }
      .btn:hover {
        transform: translateY(-2px);
        filter: brightness(0.98);
        box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
      }
      .btn:active {
        transform: translateY(1px);
      }
      .mini {
        text-align: center;
        margin-top: 10px;
      }
      .mini a {
        color: #12417b;
        font-size: clamp(17px, 1.35vw, 26px);
        font-weight: 600;
        text-underline-offset: 3px;
      }
      .remember {
        margin-top: 5px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        font-size: clamp(16px, 1.2vw, 24px);
        color: #50535a;
      }
      .remember input {
        width: 16px;
        height: 16px;
        accent-color: #141518;
      }
      .loading-wrap {
        width: 100%;
        min-height: calc(100vh - 72px);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 18px;
      }
      .spinner {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        margin-top: 10px;
        position: relative;
        animation: spin 0.95s linear infinite;
      }
      .spinner::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 50%;
        background: conic-gradient(rgba(182, 190, 203, 0.12) 0deg, rgba(182, 190, 203, 0.34) 120deg, rgba(182, 190, 203, 1) 300deg, rgba(182, 190, 203, 0.16) 360deg);
        -webkit-mask: radial-gradient(farthest-side, transparent calc(100% - 10px), #000 0);
        mask: radial-gradient(farthest-side, transparent calc(100% - 10px), #000 0);
      }
      .choose {
        min-height: min(760px, calc(100vh - 78px));
        padding: clamp(24px, 3vw, 42px) clamp(18px, 3.1vw, 54px) clamp(22px, 2.5vw, 34px);
        display: flex;
        flex-direction: column;
      }
      .top {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 20px;
      }
      .title {
        display: flex;
        align-items: center;
        gap: clamp(14px, 1.8vw, 30px);
      }
      .divider {
        width: 14px;
        height: clamp(50px, 4vw, 74px);
        border-radius: 8px;
        background: #315f96;
      }
      .title h2 {
        margin: 0;
        font-size: clamp(52px, 5vw, 82px);
        letter-spacing: -0.045em;
        white-space: nowrap;
      }
      .desc {
        margin: 8px 0 0;
        width: min(300px, 34%);
        font-size: clamp(20px, 1.5vw, 30px);
        line-height: 1.1;
        color: #4e5055;
      }
      .grid {
        width: min(1100px, 100%);
        margin: clamp(24px, 3vw, 42px) auto 0;
        display: grid;
        gap: clamp(12px, 1.3vw, 24px);
      }
      .banks {
        grid-template-columns: repeat(6, minmax(120px, 1fr));
      }
      .mods {
        width: min(820px, 100%);
        margin-top: clamp(34px, 5vw, 76px);
        grid-template-columns: repeat(3, minmax(170px, 1fr));
        gap: clamp(12px, 2vw, 34px);
      }
      .card {
        position: relative;
        border: 1px solid rgba(255, 255, 255, 0.6);
        border-radius: 22px;
        background: var(--tile);
        color: #55585e;
        padding: 14px 10px;
        min-height: clamp(160px, 17vw, 204px);
        text-align: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 11px;
        cursor: pointer;
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.52);
        transition: transform 0.24s, box-shadow 0.24s, filter 0.24s;
        opacity: 0;
        transform: translateY(16px) scale(0.98);
      }
      #bank.active .card,
      #module.active .card {
        animation: reveal 0.42s cubic-bezier(0.2, 0.8, 0.22, 1) forwards;
        animation-delay: calc(var(--i, 0) * 52ms);
      }
      .card:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 14px 28px rgba(15, 30, 61, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.6);
      }
      .card:active {
        transform: translateY(-1px) scale(0.995);
      }
      .card.sel {
        background: radial-gradient(circle at 50% 20%, var(--brand-1) 0%, var(--brand-2) 58%, var(--brand-3) 100%);
        color: #fff;
        border-color: rgba(39, 95, 158, 0.75);
        box-shadow: 0 14px 34px rgba(11, 31, 62, 0.35), inset 0 0 55px rgba(150, 186, 244, 0.24);
      }
      .card.sel::after {
        content: "";
        position: absolute;
        inset: -2px;
        border-radius: 23px;
        border: 2px solid rgba(115, 164, 226, 0.65);
        animation: halo 0.52s ease;
      }
      .dim .card:not(.sel) {
        opacity: 0.64;
        filter: grayscale(0.18);
      }
      .bank-logo {
        font-size: clamp(42px, 2.6vw, 56px);
        line-height: 1;
        letter-spacing: -0.04em;
        font-weight: 700;
        color: #3c3e43;
      }
      .card.sel .bank-logo {
        color: #fff;
      }
      .bpi {
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }
      .bpi .crest {
        width: 26px;
        height: 31px;
        border: 2px solid #a6a9ae;
        border-radius: 5px 5px 10px 10px;
        position: relative;
      }
      .bpi .crest::before {
        content: "";
        position: absolute;
        left: 50%;
        top: 3px;
        transform: translateX(-50%);
        width: 8px;
        height: 10px;
        border: 2px solid currentColor;
        border-radius: 2px;
      }
      .bpi .code {
        color: #d6262a;
      }
      .card.sel .bpi .crest,
      .card.sel .bpi .crest::before {
        border-color: #f2d654;
      }
      .card.sel .bpi .code {
        color: #ff4242;
      }
      .label-sm {
        font-size: clamp(16px, 1.04vw, 23px);
        line-height: 1.14;
      }
      .mod {
        min-height: clamp(208px, 23vw, 286px);
      }
      .icon {
        width: clamp(66px, 5.1vw, 92px);
        height: clamp(66px, 5.1vw, 92px);
        fill: none;
        stroke: currentColor;
        stroke-width: 2.5;
        stroke-linecap: round;
        stroke-linejoin: round;
      }
      .mod-title {
        font-size: clamp(29px, 2.1vw, 46px);
        line-height: 1.02;
      }
      .foot {
        margin-top: auto;
        padding-top: clamp(14px, 2.2vw, 28px);
        display: flex;
        justify-content: center;
      }
      .confirm {
        min-width: clamp(240px, 23vw, 320px);
        height: 56px;
        border: 0;
        border-radius: 999px;
        background: #dadada;
        color: #151515;
        font-size: clamp(19px, 1.95vw, 40px);
        font-weight: 600;
        cursor: not-allowed;
        transition: transform 0.22s, filter 0.22s, box-shadow 0.22s;
      }
      .confirm.on {
        background: linear-gradient(90deg, #24558f 0%, #1e4c87 100%);
        color: #fff;
        cursor: pointer;
        box-shadow: 0 12px 28px rgba(8, 29, 62, 0.28);
      }
      .confirm.on:hover {
        transform: translateY(-2px);
        filter: brightness(1.06);
      }
      .confirm.on:active {
        transform: translateY(1px);
      }
      .status {
        margin: 10px auto 0;
        min-height: 24px;
        text-align: center;
        color: #1d4f8a;
        font-size: clamp(14px, 1vw, 19px);
        font-weight: 500;
        opacity: 0;
      }
      .status.show {
        opacity: 1;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }
      @keyframes reveal {
        from {
          opacity: 0;
          transform: translateY(16px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: none;
        }
      }
      @keyframes halo {
        from {
          opacity: 0.82;
          transform: scale(0.93);
        }
        to {
          opacity: 0;
          transform: scale(1.08);
        }
      }
      @media (max-width: 1180px) {
        .banks {
          grid-template-columns: repeat(4, minmax(120px, 1fr));
        }
      }
      @media (max-width: 980px) {
        body {
          overflow: auto;
        }
        .login-wrap {
          grid-template-columns: 1fr;
          min-height: auto;
        }
        .left {
          min-height: 280px;
        }
        .top {
          flex-direction: column;
          gap: 8px;
        }
        .desc {
          width: 100%;
          max-width: 420px;
          margin-top: 0;
        }
      }
      @media (max-width: 760px) {
        .screen {
          padding: 12px;
        }
        .panel {
          width: min(100%, 690px);
        }
        .choose {
          padding: 20px 14px;
        }
        .title h2 {
          white-space: normal;
        }
        .banks {
          grid-template-columns: repeat(2, minmax(130px, 1fr));
        }
        .mods {
          grid-template-columns: 1fr;
          width: min(340px, 100%);
          margin-top: 24px;
        }
        .mod {
          min-height: 186px;
        }
      }
    </style>
  </head>
  <body>
    <div class="app">
      <section class="screen active" id="login" aria-label="Login screen">
        <div class="panel login">
          <div class="login-wrap">
            <aside class="left">
              <p class="wm">L</p>
              <div class="left-copy">
                <h2 class="spm">SP<span class="m">M</span></h2>
                <div class="logo light">
                  <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M8 56h48M12 20h40M18 20v30M28 20v30M38 20v30M48 20v30M10 14h44l-7-7H17z" /></svg>
                  <span class="word">legistra</span>
                </div>
                <p class="subtitle">Legal Registry System</p>
              </div>
            </aside>
            <div class="right">
              <div class="right-inner">
                <header class="head">
                  <h1>SIGN<br />IN</h1>
                  <p>Use your organizational credentials to continue.</p>
                </header>
                <form id="loginForm">
                  <div class="field">
                    <label class="label" for="username">
                      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 13a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0 2c-4.2 0-8 2.1-8 4.6A1.4 1.4 0 0 0 5.4 21h13.2a1.4 1.4 0 0 0 1.4-1.4C20 17.1 16.2 15 12 15z" /></svg>
                      Email
                    </label>
                    <input id="username" class="input" type="text" placeholder="Type your email..." autocomplete="username" />
                  </div>
                  <div class="field">
                    <label class="label" for="password">
                      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M17 9h-1V7a4 4 0 0 0-8 0v2H7a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2zm-7-2a2 2 0 1 1 4 0v2h-4z" /></svg>
                      Password
                    </label>
                    <input id="password" class="input" type="password" placeholder="Type your password..." autocomplete="current-password" />
                  </div>
                  <button class="btn" type="submit">Sign In</button>
                  <div class="mini">
                    <a href="#">Forgot password?</a><br />
                    <label class="remember"><input type="checkbox" checked />Remember this device</label>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="screen" id="loading" aria-label="Loading screen">
        <div class="loading-wrap">
          <h2 class="spm">SP<span class="m">M</span></h2>
          <div class="logo light">
            <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M8 56h48M12 20h40M18 20v30M28 20v30M38 20v30M48 20v30M10 14h44l-7-7H17z" /></svg>
            <span class="word">legistra</span>
          </div>
          <div class="spinner" aria-label="Loading"></div>
        </div>
      </section>

      <section class="screen" id="bank" aria-label="Bank selection screen">
        <div class="panel choose">
          <header class="top">
            <div class="title">
              <div class="logo dark">
                <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M8 56h48M12 20h40M18 20v30M28 20v30M38 20v30M48 20v30M10 14h44l-7-7H17z" /></svg>
                <span class="word">legistra</span>
              </div>
              <span class="divider"></span>
              <h2>Choose a Bank</h2>
            </div>
            <p class="desc">Select the institution you want to work with today.</p>
          </header>
          <div class="grid banks" id="bankGrid">
            <button class="card" type="button" data-bank="BPI" style="--i:1"><span class="bank-logo bpi"><span class="crest"></span><span class="code">BPI</span></span><span class="label-sm">Bank of the Philippine Islands</span></button>
            <button class="card" type="button" data-bank="BDO Unibank" style="--i:2"><span class="bank-logo">BD<span style="color:#a6a8ac">O</span></span><span class="label-sm">BDO Unibank</span></button>
            <button class="card" type="button" data-bank="China Banking Corporation" style="--i:3"><span class="bank-logo">CBC</span><span class="label-sm">China Banking Corporation</span></button>
            <button class="card" type="button" data-bank="EastWest Bank" style="--i:4"><span class="bank-logo" style="font-weight:600">eastwest</span><span class="label-sm">EastWest Bank</span></button>
            <button class="card" type="button" data-bank="Land Bank of the Philippines" style="--i:5"><span class="bank-logo" style="font-weight:600">LANDBANK</span><span class="label-sm">Land Bank of the Philippines</span></button>
            <button class="card" type="button" data-bank="Metrobank" style="--i:6"><span class="bank-logo" style="font-size:clamp(33px,2.2vw,46px)">Metrobank</span><span class="label-sm">Metropolitan Bank &amp; Trust Co.</span></button>
            <button class="card" type="button" data-bank="Philippine National Bank" style="--i:7"><span class="bank-logo">PNB</span><span class="label-sm">Philippine National Bank</span></button>
            <button class="card" type="button" data-bank="Philippine Savings Bank" style="--i:8"><span class="bank-logo" style="font-weight:600">PSBank</span><span class="label-sm">Philippine Savings Bank</span></button>
            <button class="card" type="button" data-bank="Rizal Commercial Banking Corporation" style="--i:9"><span class="bank-logo" style="font-weight:600">RCBC</span><span class="label-sm">Rizal Commercial Banking Corporation</span></button>
            <button class="card" type="button" data-bank="Security Bank" style="--i:10"><span class="bank-logo" style="font-size:clamp(34px,2.2vw,46px);line-height:.84">SECURITY<br />BANK</span><span class="label-sm">Security Bank</span></button>
            <button class="card" type="button" data-bank="UnionBank" style="--i:11"><span class="bank-logo">UnionBank</span><span class="label-sm">Union Bank</span></button>
          </div>
          <div class="foot"><button class="confirm" id="bankConfirm" type="button" disabled>Confirm</button></div>
        </div>
      </section>

      <section class="screen" id="module" aria-label="Module selection screen">
        <div class="panel choose">
          <header class="top">
            <div class="title">
              <div class="logo dark">
                <svg viewBox="0 0 64 64" aria-hidden="true"><path d="M8 56h48M12 20h40M18 20v30M28 20v30M38 20v30M48 20v30M10 14h44l-7-7H17z" /></svg>
                <span class="word">legistra</span>
              </div>
              <span class="divider"></span>
              <h2>Choose a Module</h2>
            </div>
            <p class="desc">Select the product line you want to manage.</p>
          </header>
          <div class="grid mods" id="moduleGrid">
            <button class="card mod" type="button" data-module="Business" style="--i:1">
              <svg class="icon" viewBox="0 0 24 24"><path d="M3 10h18M5 10l2-5h10l2 5M4 10v9h16v-9M9 13h6v6H9M7 10a2 2 0 0 0 4 0M11 10a2 2 0 0 0 4 0M15 10a2 2 0 0 0 4 0" /></svg>
              <span class="mod-title">Business</span>
            </button>
            <button class="card mod" type="button" data-module="Credit Card" style="--i:2">
              <svg class="icon" viewBox="0 0 24 24"><rect x="2.5" y="5.5" width="19" height="13" rx="2.4"></rect><path d="M2.8 10.2h18.4M11 14.5h7"></path><circle cx="8" cy="14.5" r="1.6"></circle></svg>
              <span class="mod-title">Credit Card</span>
            </button>
            <button class="card mod" type="button" data-module="Personal Loan" style="--i:3">
              <svg class="icon" viewBox="0 0 24 24"><circle cx="16.5" cy="5.5" r="3.2"></circle><path d="M8 19 3 18v-5h4.2l4.1 2.4H14l4.7-1.8a2 2 0 0 1 2.5 1.2L22 17.2l-8 3H8zM16.5 4.2v2.6M15.2 5.5h2.6"></path></svg>
              <span class="mod-title">Personal<br />Loan</span>
            </button>
          </div>
          <div class="foot"><button class="confirm" id="moduleConfirm" type="button" disabled>Confirm</button></div>
          <p class="status" id="status" aria-live="polite"></p>
        </div>
      </section>
    </div>

    <script>
      (() => {
        const screens = {
          login: document.getElementById("login"),
          loading: document.getElementById("loading"),
          bank: document.getElementById("bank"),
          module: document.getElementById("module"),
        };
        const form = document.getElementById("loginForm");
        const bankGrid = document.getElementById("bankGrid");
        const moduleGrid = document.getElementById("moduleGrid");
        const bankCards = [...bankGrid.querySelectorAll(".card")];
        const moduleCards = [...moduleGrid.querySelectorAll(".card")];
        const bankConfirm = document.getElementById("bankConfirm");
        const moduleConfirm = document.getElementById("moduleConfirm");
        const status = document.getElementById("status");

        let selectedBank = "";
        let selectedModule = "";
        let loadingTimer = 0;
        let bankAutoTimer = 0;

        const show = (id) => {
          Object.values(screens).forEach((s) => s.classList.remove("active"));
          screens[id].classList.add("active");
        };

        const paintSelection = (cards, selected, key) => {
          cards.forEach((card) => {
            const hit = card.dataset[key] === selected;
            card.classList.toggle("sel", hit);
            card.setAttribute("aria-pressed", String(hit));
          });
        };

        const updateBanks = () => {
          paintSelection(bankCards, selectedBank, "bank");
          bankGrid.classList.toggle("dim", Boolean(selectedBank));
          bankConfirm.disabled = !selectedBank;
          bankConfirm.classList.toggle("on", Boolean(selectedBank));
        };

        const updateModules = () => {
          paintSelection(moduleCards, selectedModule, "module");
          moduleGrid.classList.toggle("dim", Boolean(selectedModule));
          moduleConfirm.disabled = !selectedModule;
          moduleConfirm.classList.toggle("on", Boolean(selectedModule));
        };

        const reset = () => {
          clearTimeout(bankAutoTimer);
          selectedBank = "";
          selectedModule = "";
          status.textContent = "";
          status.classList.remove("show");
          updateBanks();
          updateModules();
        };

        form.addEventListener("submit", (e) => {
          e.preventDefault();
          reset();
          show("loading");
          clearTimeout(loadingTimer);
          loadingTimer = setTimeout(() => show("bank"), 1600);
        });

        bankCards.forEach((card) =>
          card.addEventListener("click", () => {
            selectedBank = card.dataset.bank || "";
            updateBanks();
            clearTimeout(bankAutoTimer);
            bankAutoTimer = setTimeout(() => show("module"), 520);
          }),
        );

        bankConfirm.addEventListener("click", () => {
          if (!selectedBank) return;
          clearTimeout(bankAutoTimer);
          show("module");
        });

        moduleCards.forEach((card) =>
          card.addEventListener("click", () => {
            selectedModule = card.dataset.module || "";
            status.classList.remove("show");
            updateModules();
          }),
        );

        moduleConfirm.addEventListener("click", () => {
          if (!selectedBank || !selectedModule) return;
          status.textContent = selectedBank + " - " + selectedModule + " selected.";
          status.classList.add("show");
        });

        updateBanks();
        updateModules();
      })();
    </script>
  </body>
</html>
